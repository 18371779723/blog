import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,f as i,o as l}from"./app-D61D4rVY.js";const n={};function r(s,e){return l(),t("div",null,e[0]||(e[0]=[i('<h1 id="大营销平台" tabindex="-1"><a class="header-anchor" href="#大营销平台"><span>大营销平台</span></a></h1><h2 id="项目简介" tabindex="-1"><a class="header-anchor" href="#项目简介"><span>项目简介</span></a></h2><p>抽奖服务是营销平台系统的重要模块，本次抽奖服务的设计，主要以支撑各类差异化的抽奖玩法，如：通过黑名单用户、积分消耗情况等策略指定抽奖奖品范围，支持 N 次抽奖次数解锁等玩法。在此抽奖模块的设计中运用了模板模式、责任链模式、组合模式和工厂模式，提高代码的可扩展性。</p><h2 id="项目架构" tabindex="-1"><a class="header-anchor" href="#项目架构"><span>项目架构</span></a></h2><p>微服务架构、DDD 领域驱动模型、前后端分离设计</p><h2 id="核心技术" tabindex="-1"><a class="header-anchor" href="#核心技术"><span>核心技术</span></a></h2><p>SpringBoot、MyBatis、MySQL、Redis、RabbitMQ、ES、Canal、xxl-job、DB-Router、DynThreadPool</p><h2 id="系统设计" tabindex="-1"><a class="header-anchor" href="#系统设计"><span>系统设计</span></a></h2><h3 id="领域模型设计" tabindex="-1"><a class="header-anchor" href="#领域模型设计"><span>领域模型设计</span></a></h3><p>基于 PRD 需求评审，将抽奖流程抽象为三个核心阶段：</p><ol><li>抽奖前：人群判断、规则校验、资格验证</li><li>抽奖中：策略执行、库存处理、概率计算</li><li>抽奖后：奖品发放、兜底策略、补偿机制</li></ol><h3 id="技术方案设计" tabindex="-1"><a class="header-anchor" href="#技术方案设计"><span>技术方案设计</span></a></h3><h4 id="流程标准化" tabindex="-1"><a class="header-anchor" href="#流程标准化"><span>流程标准化</span></a></h4><ul><li>使用模板方法模式定义标准抽奖流程</li><li>责任链模式处理抽奖前的规则验证（黑名单、权重等）</li><li>组合模式构建决策树，处理抽奖后逻辑（解锁、库存、兜底奖品）</li><li>通过数据库配置实现策略的动态构建</li></ul><h4 id="数据模型" tabindex="-1"><a class="header-anchor" href="#数据模型"><span>数据模型</span></a></h4><ul><li>抽奖策略表：定义抽奖基本配置</li><li>策略明细表：配置具体奖品及概率</li><li>规则配置表：设置抽奖规则</li><li>规则树动作表：构建规则执行路径</li></ul><h4 id="分库分表方案" tabindex="-1"><a class="header-anchor" href="#分库分表方案"><span>分库分表方案</span></a></h4><p>对用户抽奖单、获奖记录等大数据量表进行分库分表，使用自研 DB-Router 组件进行路由，通过路由切分键控制多数据源事务。</p><h4 id="库存控制方案" tabindex="-1"><a class="header-anchor" href="#库存控制方案"><span>库存控制方案</span></a></h4><ul><li>Redis decr 原子操作处理库存扣减</li><li>setNx 分布式锁作为兜底方案</li><li>异步延迟队列 + 定时任务更新数据库库存</li><li>确保无超卖且降低数据库压力</li></ul><h4 id="消息可靠性保障" tabindex="-1"><a class="header-anchor" href="#消息可靠性保障"><span>消息可靠性保障</span></a></h4><ul><li>MQ 解耦发奖流程，缩短响应链路</li><li>发奖消息写入 task 任务表</li><li>DynThreadPool 动态线程池 + 定时任务进行消息补偿</li></ul>',22)]))}const p=a(n,[["render",r],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/projects/big-market/","title":"大营销平台","lang":"zh-CN","frontmatter":{"title":"大营销平台","icon":"chart-line","date":"2024-11-15T00:00:00.000Z","description":"大营销平台 项目简介 抽奖服务是营销平台系统的重要模块，本次抽奖服务的设计，主要以支撑各类差异化的抽奖玩法，如：通过黑名单用户、积分消耗情况等策略指定抽奖奖品范围，支持 N 次抽奖次数解锁等玩法。在此抽奖模块的设计中运用了模板模式、责任链模式、组合模式和工厂模式，提高代码的可扩展性。 项目架构 微服务架构、DDD 领域驱动模型、前后端分离设计 核心技术...","head":[["meta",{"property":"og:url","content":"https://wyqjishu.us.kg/projects/big-market/"}],["meta",{"property":"og:site_name","content":"王彦群Coding"}],["meta",{"property":"og:title","content":"大营销平台"}],["meta",{"property":"og:description","content":"大营销平台 项目简介 抽奖服务是营销平台系统的重要模块，本次抽奖服务的设计，主要以支撑各类差异化的抽奖玩法，如：通过黑名单用户、积分消耗情况等策略指定抽奖奖品范围，支持 N 次抽奖次数解锁等玩法。在此抽奖模块的设计中运用了模板模式、责任链模式、组合模式和工厂模式，提高代码的可扩展性。 项目架构 微服务架构、DDD 领域驱动模型、前后端分离设计 核心技术..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-03T09:14:09.000Z"}],["meta",{"property":"article:published_time","content":"2024-11-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-03T09:14:09.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"大营销平台\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-15T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-03T09:14:09.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"王彦群\\",\\"url\\":\\"https://wyqjishu.us.kg\\"}]}"]]},"headers":[{"level":2,"title":"项目简介","slug":"项目简介","link":"#项目简介","children":[]},{"level":2,"title":"项目架构","slug":"项目架构","link":"#项目架构","children":[]},{"level":2,"title":"核心技术","slug":"核心技术","link":"#核心技术","children":[]},{"level":2,"title":"系统设计","slug":"系统设计","link":"#系统设计","children":[{"level":3,"title":"领域模型设计","slug":"领域模型设计","link":"#领域模型设计","children":[]},{"level":3,"title":"技术方案设计","slug":"技术方案设计","link":"#技术方案设计","children":[]}]}],"git":{"createdTime":1732442051000,"updatedTime":1733217249000,"contributors":[{"name":"王彦群","email":"1786947118@qq.com","commits":1}]},"readingTime":{"minutes":1.87,"words":562},"filePathRelative":"projects/big-market/README.md","localizedDate":"2024年11月15日","excerpt":"\\n<h2>项目简介</h2>\\n<p>抽奖服务是营销平台系统的重要模块，本次抽奖服务的设计，主要以支撑各类差异化的抽奖玩法，如：通过黑名单用户、积分消耗情况等策略指定抽奖奖品范围，支持 N 次抽奖次数解锁等玩法。在此抽奖模块的设计中运用了模板模式、责任链模式、组合模式和工厂模式，提高代码的可扩展性。</p>\\n<h2>项目架构</h2>\\n<p>微服务架构、DDD 领域驱动模型、前后端分离设计</p>\\n<h2>核心技术</h2>\\n<p>SpringBoot、MyBatis、MySQL、Redis、RabbitMQ、ES、Canal、xxl-job、DB-Router、DynThreadPool</p>","autoDesc":true}');export{p as comp,d as data};
